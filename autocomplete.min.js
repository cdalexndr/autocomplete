!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).autocomplete=t()}(this,(function(){"use strict";return function(e){var t,n,o=document,i=o.createElement("div"),r=i.style,f=navigator.userAgent,a=-1!==f.indexOf("Firefox")&&-1!==f.indexOf("Mobile"),d=e.debounceWaitMs||0,l=e.preventSubmit||!1,s=a?"input":"keyup",u=[],c="",v=2,p=e.showOnFocus,m=0;if(void 0!==e.minLength&&(v=e.minLength),!e.input)throw new Error("input undefined");var g=e.input;function h(){n&&window.clearTimeout(n)}function w(){return!!i.parentNode}function E(){var e;m++,u=[],c="",t=void 0,(e=i.parentNode)&&e.removeChild(i)}function b(){if(w()){r.height="auto",r.width=g.offsetWidth+"px";var t=g.getBoundingClientRect(),n=/iPad|iPhone|iPod/.test(window.navigator.userAgent)&&!window.MSStream?t.top+window.pageYOffset:t.top;n+=g.offsetHeight;var o=window.innerHeight-(t.top+g.offsetHeight);o<0&&(o=0),r.top=n+"px",r.bottom="",r.left=t.left+"px",r.maxHeight=o+"px",e.customize&&e.customize(g,t,i,o)}}function C(){for(;i.firstChild;)i.removeChild(i.firstChild);var n=function(e,t){var n=o.createElement("div");return n.textContent=e.label||"",n};e.render&&(n=e.render);var r=function(e,t){var n=o.createElement("div");return n.textContent=e,n};e.renderGroup&&(r=e.renderGroup);var f=o.createDocumentFragment(),a="#9?$";if(u.forEach((function(o){if(o.group&&o.group!==a){a=o.group;var i=r(o.group,c);i&&(i.className+=" group",f.appendChild(i))}var d=n(o,c);d&&(d.addEventListener("click",(function(t){e.onSelect(o,g),E(),t.preventDefault(),t.stopPropagation()})),o===t&&(d.className+=" selected"),f.appendChild(d))})),i.appendChild(f),u.length<1){if(!e.emptyMsg)return void E();var d=o.createElement("div");d.className="empty",d.textContent=e.emptyMsg,i.appendChild(d)}i.parentNode||o.body.appendChild(i),b(),function(){var e=i.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<i.scrollTop)i.scrollTop=t.offsetTop;else{var o=t.offsetTop+t.offsetHeight,r=i.scrollTop+i.offsetHeight;o>r&&(i.scrollTop+=o-r)}}}()}function L(){w()&&C()}function x(){L()}function y(e){e.target!==i?L():e.preventDefault()}function N(e){for(var t=e.which||e.keyCode||0,n=0,o=[38,13,27,39,37,16,17,18,20,91,9];n<o.length;n++){if(t===o[n])return}40===t&&w()||k(0)}function S(n){var o=n.which||n.keyCode||0;if(38===o||40===o||27===o){var i=w();if(27===o)E();else{if(!w||u.length<1)return;38===o?function(){if(u.length<1)t=void 0;else if(t){if(t===u[0])t=e.disableAutoSelect?void 0:u[u.length-1];else for(var n=u.length-1;n>0;n--)if(t===u[n]||1===n){t=u[n-1];break}}else t=u[u.length-1]}():function(){if(u.length<1)t=void 0;else if(t){if(t===u[u.length-1])t=e.disableAutoSelect?void 0:u[0];else for(var n=0;n<u.length-1;n++)if(t===u[n]){t=u[n+1];break}}else t=u[0]}(),C()}return n.preventDefault(),void(i&&n.stopPropagation())}13===o&&(t&&(e.onSelect(t,g),E()),l&&n.preventDefault())}function T(){p&&k(1)}function k(o){var i=++m,r=g.value;r.length>=v||1===o?(h(),n=window.setTimeout((function(){e.fetch(r,(function(n){m===i&&n&&(c=r,t=(u=n).length<1||e.disableAutoSelect?void 0:u[0],C())}),0)}),0===o?d:0)):E()}function D(){setTimeout((function(){o.activeElement!==g&&E()}),200)}return i.className="autocomplete "+(e.className||""),r.position="fixed",i.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),g.addEventListener("keydown",S),g.addEventListener(s,N),g.addEventListener("blur",D),g.addEventListener("focus",T),window.addEventListener("resize",x),o.addEventListener("scroll",y,!0),{destroy:function(){g.removeEventListener("focus",T),g.removeEventListener("keydown",S),g.removeEventListener(s,N),g.removeEventListener("blur",D),window.removeEventListener("resize",x),o.removeEventListener("scroll",y,!0),h(),E(),m++}}}}));
//# sourceMappingURL=autocomplete.min.js.map
